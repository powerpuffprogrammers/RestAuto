package loggingIn;

import java.awt.Color;
import java.awt.Font;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JButton;
import javax.swing.JPanel;
import javax.swing.JTextField;
import javax.swing.SwingConstants;

public class LogInScreen extends JPanel{

	public final String dataBaseAIPAddress = "localHost";
	public final String dataBaseAPortNumber = "8094";
	
	/**
	 * Disables the keypad when log in has been pressed
	 */
	public boolean keypadLock;
	
	/**
	 * loggedIn Tells you who you are logged in as.
	 * '0' = no one
	 * 'h' = host
	 * 'm' = manager
	 * 'w'= waiter
	 * 'c' = chef
	 */
	public char loggedIn;

	/**
	 * Holds what user is currently typing
	 */
	public long currIDEntry;
	
	private JTextField textField;
	private JTextField txtPleaseEnterEmployee;
	/**
	 * Creates the log in screen panel
	 */
	public LogInScreen(){
		loggedIn='0';
		
		//Set color to blue
		setBackground(new Color(51, 153, 255));
		//Array layout where you pick coordinates of each component
		setLayout(null);
		
		makeHeaderText();
		makeIDTextField();
		makeKeypad();
	}
	
	/**
	 * When logged in button is pressed, this should be called
	 * @param empID
	 */
	private void logInToDBA(long empID){
		//set up socket (as client)
		
		
		//check for the position
		
		//change the position
		loggedIn = '0';
		
	}
	
	/**
	 * Sets up the ID Text- display the current number as a JTextField that is non editable
	 */
	private void makeIDTextField(){
		textField = new JTextField();
		textField.setFont(new Font("Tahoma", Font.PLAIN, 12));
		textField.setEditable(false);
		textField.setHorizontalAlignment(SwingConstants.CENTER);
		textField.setBounds(550, 80, 100, 25);
		textField.setBackground(Color.LIGHT_GRAY);
		add(textField);
		textField.setColumns(10);
	}
	
	private void makeKeypad(){
		
		JButton logInButton = new JButton("Log In");
		logInButton.setForeground(Color.WHITE);
		logInButton.setBackground(new Color(0, 128, 0));
		logInButton.addActionListener(new ActionListener() {
			public void actionPerformed(ActionEvent e) {
				while(keypadLock){}
				keypadLock=true;
				logInToDBA(currIDEntry);
				if(loggedIn=='0'){
					textField.setText("");
					currIDEntry=0;
				}
				keypadLock=false;
			}
		});
		logInButton.setBounds(725, 150, 90, 30);
		add(logInButton);
		
		JButton deleteButton = new JButton("Delete");
		deleteButton.setForeground(Color.WHITE);
		deleteButton.setBackground(new Color(255, 0, 0));
		deleteButton.addActionListener(new ActionListener() {
			public void actionPerformed(ActionEvent e) {
				while(keypadLock){}
				keypadLock=true;
				textField.setText("");
				currIDEntry=0;
				keypadLock=false;
			}
		});
		deleteButton.setBounds(725, 270, 90, 30);
		add(deleteButton);
		
		JButton[] keypad = new JButton[10];
		int xRow1 = 500;
		int row=0;
		int cnt =0;
		for(int i = 1; i<10; i++){
			if(cnt>2){
				cnt=0;
				row++;
			}
			int d=i;
			keypad[i] = new JButton(""+i);
			keypad[i].setBounds(xRow1+ 75*cnt, 150+row*60, 50, 30);
			keypad[i].addActionListener(new ActionListener() {
				public void actionPerformed(ActionEvent e) {
					while(keypadLock){}
					keypadLock=true;
					textField.setText(textField.getText()+d);
					currIDEntry=currIDEntry*10+d;
					keypadLock=false;
				}
			});
			add(keypad[i]);
			cnt++;
		}
		
		
		keypad[0] = new JButton("0");
		keypad[0].setBounds(575, 150+180, 50, 30);
		keypad[0].addActionListener(new ActionListener() {
			public void actionPerformed(ActionEvent e) {
				while(keypadLock){}
				keypadLock=true;
				textField.setText(textField.getText()+"0");
				currIDEntry=currIDEntry*10;
				keypadLock=false;
			}
		});
		add(keypad[0]);
	}
	
	
	/**
	 * Sets up the Header Text "Please Enter Employee ID:" As a JTextField that is non editable
	 */
	private void makeHeaderText(){
		txtPleaseEnterEmployee = new JTextField();
		txtPleaseEnterEmployee.setEditable(false);
		txtPleaseEnterEmployee.setFont(new Font("Tahoma", Font.PLAIN, 14));
		txtPleaseEnterEmployee.setHorizontalAlignment(SwingConstants.CENTER);
		txtPleaseEnterEmployee.setText("Please Enter Employee ID:");
		txtPleaseEnterEmployee.setBounds(500, 20, 200, 30);
		add(txtPleaseEnterEmployee);
		txtPleaseEnterEmployee.setColumns(10);
	}
	
}
